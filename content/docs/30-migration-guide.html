
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<html>
  <head>

<link type="text/css" rel="stylesheet" href="/resources/site.css">
<script src='/resources/space.js'></script>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta name="keywords" content="business integration, EAI, SOA, Service Oriented Architecture, web services, SOAP, JBI, JMS, WSDL, XML, EDI, Electronic Data Interchange, standards support, integration standards, application integration, middleware, software, solutions, services, CXF, open source">
<meta name="description" content="Apache CXF, Services Framework - 3.0 Migration Guide">




    <title>
Apache CXF -- 3.0 Migration Guide
    </title>
  </head>
<body onload="init()">


<table width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td id="cell-0-0" colspan="2">&nbsp;</td>
    <td id="cell-0-1">&nbsp;</td>
    <td id="cell-0-2" colspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td id="cell-1-0">&nbsp;</td>
    <td id="cell-1-1">&nbsp;</td>
    <td id="cell-1-2">
      <!-- Banner -->
<div class="banner" id="banner"><div><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td align="left" colspan="1" nowrap>
<a shape="rect" href="http://cxf.apache.org/" title="Apache CXF"><span style="font-weight: bold; font-size: 170%; color: white">Apache CXF</span></a>
</td><td align="right" colspan="1" nowrap>
<a shape="rect" href="http://www.apache.org/" title="The Apache Sofware Foundation"><img border="0" alt="ASF Logo" src="http://cxf.apache.org/images/asf-logo.png"></a>
</td></tr></table></div></div>
      <!-- Banner -->
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs -->
<a href="index.html">Index</a>&nbsp;&gt;&nbsp;<a href="how-tos.html">How-Tos</a>&nbsp;&gt;&nbsp;<a href="migration-guides.html">Migration Guides</a>&nbsp;&gt;&nbsp;<a href="30-migration-guide.html">3.0 Migration Guide</a>
                <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
<div id="quicklinks"><p><a shape="rect" href="http://cxf.apache.org/download.html">Download</a> | <a shape="rect" href="http://cxf.apache.org/docs/index.html">Documentation</a></p></div>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </table>
      </div>
    </td>
    <td id="cell-1-3">&nbsp;</td>
    <td id="cell-1-4">&nbsp;</td>
  </tr>
  <tr>
    <td id="cell-2-0" colspan="2">&nbsp;</td>
    <td id="cell-2-1">
      <table>
        <tr valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
<div id="navigation"><ul class="alternate"><li><a shape="rect" href="overview.html">Overview</a></li><li><a shape="rect" href="how-tos.html">How-Tos</a></li><li><a shape="rect" href="frontends.html">Frontends</a></li><li><a shape="rect" href="databindings.html">DataBindings</a></li><li><a shape="rect" href="transports.html">Transports</a></li><li><a shape="rect" href="configuration.html">Configuration</a></li><li><a shape="rect" href="debugging-and-logging.html">Debugging and Logging</a></li><li><a shape="rect" href="tools.html">Tools</a></li><li><a shape="rect" href="restful-services.html">RESTful Services</a></li><li><a shape="rect" href="wsdl-bindings.html">WSDL Bindings</a></li><li><a shape="rect" href="service-routing.html">Service Routing</a></li><li><a shape="rect" href="dynamic-languages.html">Dynamic Languages</a></li><li><a shape="rect" href="ws-support.html">WS-* Support</a></li><li><a shape="rect" href="advanced-integration.html">Advanced Integration</a></li><li><a shape="rect" href="deployment.html">Deployment</a></li><li><a shape="rect" href="schemas-and-namespaces.html">Use of Schemas and Namespaces</a></li></ul><hr><ul class="alternate"><li><p>Search</p></li></ul><form enctype="application/x-www-form-urlencoded" method="get" id="cse-search-box" action="http://www.google.com/cse">
  <div>
    <input type="hidden" name="cx" value="002890367768291051730:o99qiwa09y4">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="21">
    <input type="submit" name="sa" value="Search">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script><hr><ul class="alternate"><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest/">API 3.2.x (Javadoc)</a></li><li><a shape="rect" href="http://cxf.apache.org/javadoc/latest-3.1.x/">API 3.1.x (Javadoc)</a></li><li><a shape="rect" href="http://cxf.apache.org/">CXF Website</a></li></ul><p>&#160;</p><p><a shape="rect" class="external-link" href="http://www.apache.org/events/current-event.html"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-external-resource" src="http://www.apache.org/events/current-event-125x125.png" data-image-src="http://www.apache.org/events/current-event-125x125.png"></span></a></p></div>
                    <!-- NavigationBar -->
                  </div>
              </div>
            </div>
          </div>
         </td>
         <td height="100%">
           <!-- Content -->
           <div class="wiki-content">
<div id="ConfluenceContent"><h2 id="id-3.0MigrationGuide-3.0MigrationGuide">3.0 Migration Guide</h2><h4 id="id-3.0MigrationGuide-JAX-RS">JAX-RS</h4><ul><li>JAX-RS 2.0 has been completely implemented.</li><li>JAX-RS WADL auto-generation code has been moved to a new cxf-rt-rs-service-description module.</li><li>JAX-RS 2.0 Client API and CXF specific WebClient and Proxy client code is now available in a new cxf-rt-rs-client module. Important: the namespace for jaxrs:client elements has changed from "http://cxf.apache.org/jaxrs" to "http://cxf.apache.org/jaxrs-client"</li><li>CXF RequestHandler and ResponseHandler filters have been removed, please use JAX-RS 2.0 ContainerRequestFilter and ContainerResponseFilter and also WriterInterceptor and ReaderInterceptor when needed.</li><li>CXF JAX-RS Form extension has been dropped, please use JAX-RS 2.0 Form.</li><li>CXF JAX-RS ParameterHandler has been dropped, please use JAX-RS 2.0 ParamConverterProvider.</li><li>javax.annotation.Resource annotation can no longer be used to annotate JAX-RS context properties. Only javax.ws.rs.core.Context annotation is supported from now on.</li></ul><h4 id="id-3.0MigrationGuide-JAX-WS/Soap">JAX-WS/Soap</h4><ul><li>Add new code generator frontend to add CXF specific constructors and methods. (pass "-fe cxf" to wsdl2java)</li><li>Make AbstractFeature subclass WebServiceFeature and update the JAX-WS frontend to look for them.</li><li>"jaxb-validation-event-handler"s now apply for both Reading and Writing. (previously only applied to Reading). There are separate jaxb-(reader|writer)-validation-event-handler properties if you need it set for only one direction.</li><li>If the WSDL location that is passed into CXF is not valid, previous versions of CXF *MAY* ignore the error and proceed as if "null" was passed for the WSDL. &#160; 3.0 will now throw an exception.</li><li>ClientProxy.getClient(proxy) is no longer needed for most use cases. &#160;The client proxy instances now implement the Client API directly. &#160; A direct cast to Client should work.</li></ul><h4 id="id-3.0MigrationGuide-Transports">Transports</h4><ul><li>Support for the older JMS 1.0.2 API's has been removed. &#160; Your JMS provider must support the 1.1 API's.&#160;</li><li>A new WebSocket based transport has been added</li><li>Support for Netty based HTTP servers and clients has been added</li></ul><h4 id="id-3.0MigrationGuide-BeanValidation">Bean Validation</h4><p>Bean Validation 1.1 interceptors and features have been introduced for JAX-RS and JAX-WS frontends.</p><h4 id="id-3.0MigrationGuide-WS-Security">WS-Security</h4><ul><li>The DefaultCryptoCoverageChecker now contains boolean properties to easily check if a WSS UsernameToken was signed and/or encrypted. The default is now that a UsernameToken must be encrypted.</li><li>CXF 3.0.x picks up a new major version of Apache WSS4J (2.0.0). There are some changes in this release which will impact on existing CXF users. These changes are extensively summarized in the <a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">WSS4J 2.0.0 Migration Guide</a>. The major changes are as follows:<br clear="none"><ul><li>If you have implemented a CallbackHandler to set/retrieve passwords for UsernameTokens/Signatures/Decryption/etc., then the namespace of the WSPasswordCallback Object has changed from "org.apache.ws.security" to "org.apache.wss4j.common.ext".</li><li>If you have implemented a CallbackHandler to create SAML Assertions, then the namespace of the SAML bean objects has changed from "org.apache.ws.security.saml.ext" to "org.apache.wss4j.common.saml".&#160;</li><li>WSS4J 1.6.x used a saml properties file to sign a SAML Assertion. This has been removed in WSS4J 2.0.0. Instead the SAMLCallback Object contains additional properties that can be set to sign the Assertion. Please see the section entitled "SAML Assertion changes" in the&#160;<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">WSS4J 2.0.0 Migration Guide</a> for more information on this.</li><li>A small number of configuration tags have been removed in WSS4J 2.0.0. Please see the section entitled "Removed Configuration Tags in WSS4J 2.0.0" in the&#160;<a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/migration/wss4j20.html">WSS4J 2.0.0 Migration Guide</a> for more information on this.</li><li>The default namespace for derived keys and secure conversation is now&#160; "<span class="nolink">http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512</span>". The older namespace can be used instead via a new configuration tag.</li><li>The RSA v1.5 Key Transport algorithm is no longer allowed by default. This can be changed via a configuration tag.</li><li>Turning off BSP (Basic Security Profile) Compliance (Basic Security Profile) on the outbound side no longer has the effect of disabling the addition of a InclusiveNamespaces PrefixList when signing a portion of the message. This is now controlled by a separate configuration tag in WSS4J 2.0.0.</li></ul></li><li>In addition to the changes above, CXF 3.0.0 fully supports the new streaming (StAX-based) WS-Security implementation in WSS4J 2.0.0.</li><li>To switch to use the streaming code for the manual "Action" based approach, simply change the outbound and inbound interceptors as follows:<ul><li>"org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor" to "org.apache.cxf.ws.security.wss4j.WSS4JStaxOutInterceptor".</li><li>"org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor" to "org.apache.cxf.ws.security.wss4j.WSS4JStaxInInterceptor".</li></ul></li><li>For the WS-SecurityPolicy based approach of configuring WS-Security, simply set the JAX-WS property SecurityConstants.ENABLE_STREAMING_SECURITY ("ws-security.enable.streaming") to "true". For more information on the streaming functionality available in WSS4J 2.0.0, please see the <a shape="rect" class="external-link" href="http://ws.apache.org/wss4j/streaming.html">streaming documentation</a> page of WSS4J.</li></ul><h4 id="id-3.0MigrationGuide-WS-ReliableMessaging">WS-ReliableMessaging</h4><ul><li>The WS-RM subsystem has been updated to more completely implement the 1.1 specification. &#160;</li><li>Closing a client proxy via ((Closable)proxy).close() will now terminate open sequences.</li></ul><h4 id="id-3.0MigrationGuide-Majordependencychanges">Major dependency changes</h4><ul><li>Spring 3.2 or newer is required. &#160; The calls to the API's that were deprecated in Spring 3.x have been removed. &#160;This allows CXF 3.0 to work with Spring 4, but means it can no longer work with Spring 2.5.</li></ul><h4 id="id-3.0MigrationGuide-CXFModule/JarChanges">CXF Module/Jar Changes</h4><ul><li>Combined api/core into just a cxf-core. All "wsdl" related stuff has been moved to a new cxf-wsdl bundle to remove the wsdl4j requirement for JAX-RS applications.</li><li>Dropped support for Karaf 2.2.x. Karaf 2.3.x is now required.</li><li>The direct dependency on a javax.mail implementation has been removed and the CXF maven poms will not pull one in transitively anymore. For MOST users, this is not a problem. However, if your application uses MTOM or Soap w/Attachments or similar that requires some of the DataContentHandlers that are part of the mail implementations, you may need to re-add this to your classpath.</li><li>DynamicClientFactory was moved from the JAXB databinding to the Simple frontend. However, users are strongly encouraged to use the JaxWsDynamicClientFactory subclass.</li><li>The large bundle jar has been removed due to maintenance issues as well as new functionality not being usable from the bundle jar. &#160;Users should upgrade to the individual modules that they need for their application.</li></ul><h4 id="id-3.0MigrationGuide-Removed/ChangedAPI's">Removed/Changed API's</h4><ul><li>CXFBusImpl has been removed. The only subclass was the ExtensionManagerBus (SpringBus and Blueprint/osgi stuff subclassed that) so the functionality was pushed up into ExtensionManagerBus. Some of the "common" methods were put directly on the Bus interface to make using the Bus cleaner (no casts to the impl).</li><li>The unused "run()" method on Bus was removed.</li><li>Merge BaseDataReader/DataReader and the same for the writer, getting rid of the "Base" versions that are unreferenced.</li><li>The 2 unused params on Destination.getBackChannel were removed. They were unused and normally passed in as null.</li><li>Remove QueryHandlers -&gt; these were originally used for the ?wsdl processing (and is still used for ?js). However, that stuff is better done directly on the interceptor chains as interceptors to allow user supplied interceptors to also handle them. I'd like to just remove these. (obviously update the ?js stuff) Would simplify the CXFServlet a bit.</li><li>Removed all the /META-INF/cxf/cxf-extension-XYZ.xml files. They have been deprecated and not needed for a long time.</li><li>Updated ConduitInitiator and DestinationFactory to pass Bus as parameter to the various methods.</li><li>Removed support for the old bus-extensions.xml file (in favor of the current and much faster bus-extensions.txt)</li><li>Move ALL XML parsing and writing to StaxUtils and DOM based utilities to DOMUtils. The XMLUtils class that used SAX based parsing and Transformer based writing has been eliminated. This simplifies the code as well as increases security as we can provide better limits and have more control with the StAX based IO.</li><li>AddressingProperties has been turned from an interface to a concrete class that can be created directly with "new". AddressingPropertiesImpl has been removed.</li><li>Many of our interfaces/classes that held onto constants were either removed or moved. In particular XmlSchemaConstants was removed (use the Constants from the XmlSchema library directly), WSDLConstants was moved from api to rt-wsdl, SOAPConstants was removed (most are available in WSDLConstants). Goal is to reduce some memory usage and help startup time and reduce a lot of duplication.</li><li>AlternativeSelector and the PolicyEngine and other PolicyRelated classes have been updated to pass the current Message in (when appropriate) to allow using message contextual information to select the alternative. HOWEVER, keep in mind that the selected alternative is likely cached and thus if contextual information changes, the alternative may not be recalculated.</li><li>FailoverTargetSelector will not activate the fail-over in cases when HTTP client errors are returned, only HTTP 404 and 503 statuses will be recognized. Set FailoverTargetSelector supportNotAvailableErrorsOnly property to false if the support for all HTTP errors is required.</li><li>ServletController will not override the endpoint addresses by default as it has side-effects when a given endpoint is accessed via multiple paths. Set CXFServlet "disable-address-updates" parameter to 'false' if required.</li><li>The long since deprecated&#160;org.apache.cxf.frontend.MethodDispatcher has been removed. &#160;(It was replaced with&#160;org.apache.cxf.service.invoker.MethodDispatcher in 2.6)</li><li>The deprecated&#160;JAXBToStringBuilder and&#160;JAXBToStringStyle classes that were in cxf-rt-databinding-jaxb have been removed. &#160;The functionality has been provided by cxf-xjc-runtime for a while now.</li><li>The deprecated&#160;URIMappingInterceptor has been removed. &#160;This hasn't been on the default chain for some time due to a bunch of security related issues.</li><li>SchemaValidation annotation has had its deprecated "enabled" property removed. Please use its "type" property to control the validation.</li><li>The "Spring" type was removed from the FactoryType annotation. &#160;Instead, use factoryClass=<span style="line-height: 1.4285715;">SpringBeanFactory.class.</span></li></ul></div>
           </div>
           <!-- Content -->
         </td>
        </tr>
      </table>
   </td>
   <td id="cell-2-2" colspan="2">&nbsp;</td>
  </tr>
  <tr>
   <td id="cell-3-0">&nbsp;</td>
   <td id="cell-3-1">&nbsp;</td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://cxf.apache.org/privacy-policy.html">Privacy Policy</a> - 
         (<a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=25203937">edit page</a>) 
	 (<a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=25203937&amp;showComments=true&amp;showCommentArea=true#addcomment">add comment</a>)<br>
	Apache CXF, CXF, Apache, the Apache feather logo are trademarks of The Apache Software Foundation.<br>
        All other marks mentioned may be trademarks or registered trademarks of their respective owners.
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3">&nbsp;</td>
   <td id="cell-3-4">&nbsp;</td>
  </tr>
  <tr>
    <td id="cell-4-0" colspan="2">&nbsp;</td>
    <td id="cell-4-1">&nbsp;</td>
    <td id="cell-4-2" colspan="2">&nbsp;</td>
  </tr>
</table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4458903-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>
</html>

